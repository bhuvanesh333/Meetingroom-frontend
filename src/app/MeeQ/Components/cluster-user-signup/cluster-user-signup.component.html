<div class="signup-container">
    <div class="left">
        <div class="signup-modal" (click)="$event.stopPropagation()">
            <div class="modal-header">
                <h3>Create Your MeeQ Account</h3>
                <button class="close-btn" (click)="closeModal.emit()" type="button">
                    <i class="fas fa-times"><b>X</b></i>
                </button>
            </div>

            <div class="modal-body">
                <form (ngSubmit)="onSignup()" #signupForm="ngForm">
                    <div class="form-group">
                        <label for="fullname">Full Name</label>
                        <input type="text" id="fullname" name="fullname" [(ngModel)]="signupData.fullname" required
                            #fullname="ngModel" placeholder="Enter your full name" class="form-control">
                        <div class="error-message" *ngIf="fullname.invalid && fullname.touched">
                            Full name is required
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" name="username" [(ngModel)]="signupData.username" required
                            #username="ngModel" placeholder="Choose a username" class="form-control">
                        <div class="error-message" *ngIf="username.invalid && username.touched">
                            Username is required
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="emailid">Email Address</label>
                        <input type="email" id="emailid" name="emailid" [(ngModel)]="signupData.emailId" required email
                            #emailid="ngModel" placeholder="Enter your email address" class="form-control">
                        <div class="error-message" *ngIf="emailid.invalid && emailid.touched">
                            <span *ngIf="emailid.errors?.['required']">Email is required</span>
                            <span *ngIf="emailid.errors?.['email']">Please enter a valid email</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="clusterid">Cluster ID</label>
                        <input type="text" id="clusterid" name="clusterid" [(ngModel)]="signupData.clusterId" required
                            #clusterid="ngModel" placeholder="Enter your organization's cluster ID"
                            class="form-control">
                        <div class="error-message" *ngIf="clusterid.invalid && clusterid.touched">
                            Cluster ID is required
                        </div>
                        <div class="help-text">
                            <i class="fas fa-info-circle"></i>
                            Contact your facility manager for your cluster ID
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="password">Password</label>
                        <div class="password-input-wrapper">
                            <input [type]="showPassword ? 'text' : 'password'" id="password" name="password"
                                [(ngModel)]="signupData.password" required minlength="8" #password="ngModel"
                                placeholder="Create a strong password" class="form-control">
                            <button type="button" class="password-toggle" (click)="togglePasswordVisibility()">
                                <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
                            </button>
                        </div>
                        <div class="error-message" *ngIf="password.invalid && password.touched">
                            <span *ngIf="password.errors?.['required']">Password is required</span>
                            <span *ngIf="password.errors?.['minlength']">Password must be at least 8 characters</span>
                        </div>
                        <div class="password-strength" *ngIf="signupData.password">
                            <div class="strength-indicator" [class]="getPasswordStrength()"></div>
                            <span class="strength-text">{{ getPasswordStrengthText() }}</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input type="password" id="confirmPassword" name="confirmPassword" [(ngModel)]="confirmPassword"
                            required #confirmPwd="ngModel" placeholder="Confirm your password" class="form-control">
                        <div class="error-message"
                            *ngIf="confirmPwd.touched && signupData.password !== confirmPassword">
                            Passwords do not match
                        </div>
                    </div>

                    <div class="form-group checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" [(ngModel)]="agreeToTerms" name="agreeToTerms" required>
                            <span class="checkmark"></span>
                            I agree to the <a href="#" class="link">Terms of Service</a> and
                            <a href="#" class="link">Privacy Policy</a>
                        </label>
                    </div>

                    <button type="submit" class="btn-signup-submit"
                        [disabled]="!signupForm.valid || signupData.password !== confirmPassword || !agreeToTerms"
                        [class.loading]="isLoading">
                        <span *ngIf="!isLoading">Create Account</span>
                        <span *ngIf="isLoading">
                            <i class="fas fa-spinner fa-spin"></i> Creating Account...
                        </span>
                    </button>
                </form>
            </div>

            <div class="modal-footer">
                <p>Already have an account?
                    <button type="button" class="link-btn" (click)="switchToLogin()">
                        Sign in here
                    </button>
                </p>
            </div>
        </div>
    </div>
     <div class="right">
        <div class="background-image"></div>
    </div>
</div>